# Analysis Report: {Module Name}

## Validation Summary

| Check | Status | Issues | Warnings |
|-------|--------|--------|----------|
| Spec → Plan Consistency | PASS/FAIL | {count} | {count} |
| Plan → Tasks Coverage | PASS/FAIL | {count} | {count} |
| Dependency Graph | PASS/FAIL | {count} | {count} |
| Exact Contracts | PASS/FAIL | {count} | {count} |
| Constitution Compliance | PASS/FAIL | {count} | {count} |

**Overall Status**: `READY` / `BLOCKING_ISSUES_FOUND`

---

## BLOCKING Issues (Must Fix Before Implementation)

> These issues prevent safe implementation and must be resolved.

### Issue 1: {Issue Title}

| Field | Value |
|-------|-------|
| Category | {Spec→Plan / Plan→Tasks / Dependencies / Contracts / Constitution} |
| Severity | BLOCKING |
| Location | {file:line or section reference} |

**Problem**: {Detailed description of what's wrong}

**Impact**: {What will happen if not fixed}

**Suggested Fix**: {How to resolve this}

### Issue 2: {Issue Title}
{...}

---

## Warnings (Should Fix)

> These issues may cause problems but don't block implementation.

### Warning 1: {Warning Title}

| Field | Value |
|-------|-------|
| Category | {Category} |
| Severity | WARNING |
| Location | {file:line or section reference} |

**Problem**: {Description}

**Suggested Fix**: {How to resolve}

### Warning 2: {Warning Title}
{...}

---

## Info (Nice to Know)

> Observations that don't require action but may be helpful.

- {Info item 1}
- {Info item 2}

---

## Spec → Plan Consistency

### Requirements Covered

| Requirement ID | Plan Section | Status |
|----------------|--------------|--------|
| REQ-001 | Section 3.1 | COVERED |
| REQ-002 | Section 3.2 | COVERED |
| REQ-003 | - | MISSING |

### Phantom Features (in plan but not spec)

| Plan Feature | Issue |
|--------------|-------|
| {Feature} | Not in requirements - remove or get approval |

---

## Plan → Tasks Coverage

### Features with Tasks

| Feature | Task IDs | Coverage |
|---------|----------|----------|
| User Registration | T001, T002, T003 | COMPLETE |
| User Login | T004, T005 | COMPLETE |
| Password Reset | - | MISSING TASKS |

### Orphan Tasks (no plan reference)

| Task ID | Description | Issue |
|---------|-------------|-------|
| T099 | {Description} | No matching feature in plan |

---

## Dependency Graph Validation

### Dependency Structure

```
Batch 0: T001, T002 (no deps)
    │
    ▼
Batch 1: T003, T006 (deps: T001, T002)
    │
    ▼
Batch 2: T004, T005, T007 (deps: T003)
    │
    ▼
Batch 3: T008 (deps: T007)
```

### Validation Results

| Check | Status |
|-------|--------|
| No circular dependencies | PASS/FAIL |
| All deps exist | PASS/FAIL |
| No self-dependencies | PASS/FAIL |
| Logical order | PASS/FAIL |

### Issues Found

| Issue | Tasks Involved | Fix |
|-------|----------------|-----|
| Circular dependency | T005 ↔ T007 | Remove one dependency |
| Missing dependency | T003 → T099 | T099 doesn't exist |

---

## Exact Contracts Verification

### API Contracts

| Task | Endpoint | Request Type | Response Type | Status |
|------|----------|--------------|---------------|--------|
| T003 | POST /auth/register | RegisterDto | User | DEFINED |
| T005 | POST /auth/login | LoginDto | TokenResponse | DEFINED |
| T007 | GET /users/me | - | User | MISSING_TYPES |

### Database Contracts

| Task | Model | Fields | Status |
|------|-------|--------|--------|
| T001 | User | id, email, password, name | DEFINED |
| T002 | Session | - | MISSING_SCHEMA |

### UI Component Contracts

| Task | Component | Props | State | Status |
|------|-----------|-------|-------|--------|
| T004 | RegisterForm | onSubmit, isLoading | form data | DEFINED |
| T008 | LoginForm | - | - | MISSING_PROPS |

---

## Constitution Compliance

### Tech Stack Check

| Requirement | Expected | Actual | Status |
|-------------|----------|--------|--------|
| Frontend | Next.js/React | Next.js | PASS |
| UI Library | Shadcn/ui | Shadcn/ui | PASS |
| Backend | NestJS | NestJS | PASS |
| ORM | Prisma | Prisma | PASS |
| State | Zustand | Redux | FAIL |

### Quality Gates Check

| Gate | Required | Planned | Status |
|------|----------|---------|--------|
| Unit Test Coverage | >80% | T005, T010 | PASS |
| E2E Tests | Yes | T012 | PASS |
| Smoke Test | Mandatory | Not planned | FAIL |

---

## Recommendation

Based on the analysis:

- [ ] **PROCEED** to implementation - All checks pass
- [x] **RETURN** to planning - Fix blocking issues first

### Action Items Before Proceed

1. {Action item 1}
2. {Action item 2}
3. {Action item 3}

---

## Metadata

| Field | Value |
|-------|-------|
| Analyzed Files | {list of files} |
| Generated On | {timestamp} |
| Generated By | `/project:analyze` |
| Blocking Issues | {count} |
| Warnings | {count} |
| Info Items | {count} |
